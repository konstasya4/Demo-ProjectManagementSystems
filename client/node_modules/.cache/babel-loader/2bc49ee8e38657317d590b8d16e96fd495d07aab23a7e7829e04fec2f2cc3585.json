{"ast":null,"code":"var _jsxFileName = \"/Users/konstasya/Downloads/test-avito/src/components/Issues/Main.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { getAllIssues } from \"../../shared/api\";\nimport IssuesList from \"./IssuesList\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setIssuesData } from \"../../slices/slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Main = () => {\n  _s();\n  const [data, setData] = useState();\n  const [filteredIssues, setFilteredIssues] = useState([]);\n  const dispatch = useDispatch();\n  const allIssues = useSelector(state => state.dataIssues.dataAllIssues);\n  useEffect(() => {\n    getAllIssues().then(res => {\n      setData(res.data);\n      if (res) dispatch(setIssuesData(res.data));\n    }).catch(err => {\n      console.error(\"Ошибка\", err);\n    });\n  }, []);\n  useEffect(() => {\n    if (allIssues.length === 0) {\n      setFilteredIssues([]);\n      return;\n    }\n    const result = allIssues.filter(issue => {\n      // 5.1. По статусу\n      if (statusFilter && issue.status !== statusFilter) {\n        return false;\n      }\n      // 5.2. По доске (boardId)\n      if (boardFilter !== \"\" && issue.boardId !== boardFilter) {\n        return false;\n      }\n      // 5.3. По названию (без учёта регистра)\n      if (titleQuery) {\n        const titleLower = issue.title.toLowerCase();\n        const qLower = titleQuery.toLowerCase();\n        if (!titleLower.includes(qLower)) {\n          return false;\n        }\n      }\n      // 5.4. По исполнителю\n      if (assigneeQuery) {\n        const assigneeLower = issue.assignee.fullName.toLowerCase();\n        const qLower = assigneeQuery.toLowerCase();\n        if (!assigneeLower.includes(qLower)) {\n          return false;\n        }\n      }\n      return true;\n    });\n    setFilteredIssues(result);\n  }, [allIssues, statusFilter, boardFilter, titleQuery, assigneeQuery]);\n  return /*#__PURE__*/_jsxDEV(IssuesList, {\n    data: data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 12\n  }, this);\n};\n_s(Main, \"e+Uh4Apo7P/KVctrFXSsD0OQQYI=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Main;\nexport default Main;\nvar _c;\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["useEffect","useState","getAllIssues","IssuesList","useDispatch","useSelector","setIssuesData","jsxDEV","_jsxDEV","Main","_s","data","setData","filteredIssues","setFilteredIssues","dispatch","allIssues","state","dataIssues","dataAllIssues","then","res","catch","err","console","error","length","result","filter","issue","statusFilter","status","boardFilter","boardId","titleQuery","titleLower","title","toLowerCase","qLower","includes","assigneeQuery","assigneeLower","assignee","fullName","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/konstasya/Downloads/test-avito/src/components/Issues/Main.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { getAllIssues } from \"../../shared/api\"\nimport { DataProjectIssue, State } from \"../../types/types\"\nimport IssuesList from \"./IssuesList\"\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setIssuesData } from \"../../slices/slice\";\n\nconst Main = () =>{\n    const [data, setData] = useState<DataProjectIssue[]>();\n    const [filteredIssues, setFilteredIssues] = useState<DataProjectIssue[]>([]);\n\n    const dispatch = useDispatch()\n    const allIssues = useSelector((state:State)=>state.dataIssues.dataAllIssues)\n\n    useEffect(() => {\n      getAllIssues()\n        .then((res) => {\n            setData(res.data)\n            if (res) dispatch(setIssuesData(res.data))}\n        )\n        .catch((err) => {\n          console.error(\"Ошибка\", err);\n        });\n    }, []);\n\n    useEffect(() => {\n      if (allIssues.length === 0) {\n        setFilteredIssues([]);\n        return;\n      }\n      const result = allIssues.filter((issue) => {\n        // 5.1. По статусу\n        if (statusFilter && issue.status !== statusFilter) {\n          return false;\n        }\n        // 5.2. По доске (boardId)\n        if (boardFilter !== \"\" && issue.boardId !== boardFilter) {\n          return false;\n        }\n        // 5.3. По названию (без учёта регистра)\n        if (titleQuery) {\n          const titleLower = issue.title.toLowerCase();\n          const qLower = titleQuery.toLowerCase();\n          if (!titleLower.includes(qLower)) {\n            return false;\n          }\n        }\n        // 5.4. По исполнителю\n        if (assigneeQuery) {\n          const assigneeLower = issue.assignee.fullName.toLowerCase();\n          const qLower = assigneeQuery.toLowerCase();\n          if (!assigneeLower.includes(qLower)) {\n            return false;\n          }\n        }\n        return true;\n      });\n      setFilteredIssues(result);\n    }, [allIssues, statusFilter, boardFilter, titleQuery, assigneeQuery]);\n  \n  \n    return <IssuesList data={data} />;\n  };\nexport default Main"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,YAAY,QAAQ,kBAAkB;AAE/C,OAAOC,UAAU,MAAM,cAAc;AACrC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,aAAa,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,IAAI,GAAGA,CAAA,KAAK;EAAAC,EAAA;EACd,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAqB,CAAC;EACtD,MAAM,CAACY,cAAc,EAAEC,iBAAiB,CAAC,GAAGb,QAAQ,CAAqB,EAAE,CAAC;EAE5E,MAAMc,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9B,MAAMY,SAAS,GAAGX,WAAW,CAAEY,KAAW,IAAGA,KAAK,CAACC,UAAU,CAACC,aAAa,CAAC;EAE5EnB,SAAS,CAAC,MAAM;IACdE,YAAY,CAAC,CAAC,CACXkB,IAAI,CAAEC,GAAG,IAAK;MACXT,OAAO,CAACS,GAAG,CAACV,IAAI,CAAC;MACjB,IAAIU,GAAG,EAAEN,QAAQ,CAACT,aAAa,CAACe,GAAG,CAACV,IAAI,CAAC,CAAC;IAAA,CAC9C,CAAC,CACAW,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,KAAK,CAAC,QAAQ,EAAEF,GAAG,CAAC;IAC9B,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAENvB,SAAS,CAAC,MAAM;IACd,IAAIgB,SAAS,CAACU,MAAM,KAAK,CAAC,EAAE;MAC1BZ,iBAAiB,CAAC,EAAE,CAAC;MACrB;IACF;IACA,MAAMa,MAAM,GAAGX,SAAS,CAACY,MAAM,CAAEC,KAAK,IAAK;MACzC;MACA,IAAIC,YAAY,IAAID,KAAK,CAACE,MAAM,KAAKD,YAAY,EAAE;QACjD,OAAO,KAAK;MACd;MACA;MACA,IAAIE,WAAW,KAAK,EAAE,IAAIH,KAAK,CAACI,OAAO,KAAKD,WAAW,EAAE;QACvD,OAAO,KAAK;MACd;MACA;MACA,IAAIE,UAAU,EAAE;QACd,MAAMC,UAAU,GAAGN,KAAK,CAACO,KAAK,CAACC,WAAW,CAAC,CAAC;QAC5C,MAAMC,MAAM,GAAGJ,UAAU,CAACG,WAAW,CAAC,CAAC;QACvC,IAAI,CAACF,UAAU,CAACI,QAAQ,CAACD,MAAM,CAAC,EAAE;UAChC,OAAO,KAAK;QACd;MACF;MACA;MACA,IAAIE,aAAa,EAAE;QACjB,MAAMC,aAAa,GAAGZ,KAAK,CAACa,QAAQ,CAACC,QAAQ,CAACN,WAAW,CAAC,CAAC;QAC3D,MAAMC,MAAM,GAAGE,aAAa,CAACH,WAAW,CAAC,CAAC;QAC1C,IAAI,CAACI,aAAa,CAACF,QAAQ,CAACD,MAAM,CAAC,EAAE;UACnC,OAAO,KAAK;QACd;MACF;MACA,OAAO,IAAI;IACb,CAAC,CAAC;IACFxB,iBAAiB,CAACa,MAAM,CAAC;EAC3B,CAAC,EAAE,CAACX,SAAS,EAAEc,YAAY,EAAEE,WAAW,EAAEE,UAAU,EAAEM,aAAa,CAAC,CAAC;EAGrE,oBAAOhC,OAAA,CAACL,UAAU;IAACQ,IAAI,EAAEA;EAAK;IAAAiC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnC,CAAC;AAACrC,EAAA,CAvDED,IAAI;EAAA,QAIWL,WAAW,EACVC,WAAW;AAAA;AAAA2C,EAAA,GAL3BvC,IAAI;AAwDV,eAAeA,IAAI;AAAA,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}